<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeagueManager</title>
    <link href="~/css/bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
  <script src="~/js/modernizr-2.8.3.js"></script>
</head>
<body style="background-color: #444444">
    <nav class="navbar navbar-expand-lg navbar-light bg-custom">
        <div style="color: #FFF;" class="container">
            @Html.ActionLink("LeagueManager", "Index", "Home", null, new { @class = "navbar-brand", @style = "color: #FFF" })
            <button class="navbar-toggler"
                    type="button"
                    data-mdb-toggle="collapse"
                    data-mdb-target="#navbarNavAltMarkup"
                    aria-controls="navbarNavAltMarkup"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    @Html.ActionLink("Home", "Index", "Home", null, new { @class = "nav-link", @style = "color: #FFF" })
                </div>
                <div class="navbar-nav ml-auto">    
                    <div id="leagueCodeExists" style="display: none; ">
                        <span id="leagueCode" style="color: #00ff85">

                        </span>
                        <button onclick="clearLeague()"class="btn btn-primary" style="background-color: #00ff85; border-color: #00ff85; color: #3D195B;">Clear League</button>
                    </div>
                    <div id="inputLeagueCode" style="display: none;">
                        <input class="form-control d-inline" id="inputLeagueCodeValue" />
                        <button onclick="submitLeague()" class="btn btn-primary d-inline" style="background-color: #00ff85; border-color: #00ff85; color: #3D195B;">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap4.min.js"></script>
    <script>
        function getCookie() {
            let name = 'leagueCode' + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function setCookie(cvalue) {
            const d = new Date();
            d.setTime(d.getTime() + (60 * 24 * 60 * 60 * 1000));
            let expires = "expires=" + d.toUTCString();
            document.cookie = 'leagueCode' + "=" + cvalue + ";" + expires + ";path=/";
        }

        function clearLeague() {
            document.cookie = 'leagueCode' + '=; Max-Age=-99999999;';
            document.location.reload(true);
        }

        function submitLeague() {
            var input = $('#inputLeagueCodeValue');
            setCookie(input.val());
            document.location.reload(true);
        }

        //setCookie('leagueCode', '785643', 60);
        var leagueCode = $('#leagueCode');
        var cookie = getCookie();
        var leagueCodeExists = $('#leagueCodeExists');
        var inputLeagueCode = $('#inputLeagueCode');
        if (cookie) {
            leagueCode.html(cookie);
            leagueCodeExists.show();
            inputLeagueCode.hide();
        }
        else {
            inputLeagueCode.show();
            leagueCodeExists.hide();
        }
    </script>
    <script src="~/js/bootstrap.js"></script>
    @RenderSection("scripts", required: false)
    <div class="container body-content">
        @RenderBody()
    </div>
</body>
</html>
